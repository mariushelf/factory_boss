entities:
  Person:
    fields:
      person_id:
          type: string
          primary_key: true
      name:
          type: string
          mock: {faker: name}
      birthday:
          type: date
          mock:
            faker:
              date_of_birth:
                minimum_age: 0
                maximum_age: 115
      age:
        type: integer
        mock:
          null_rate: .3  # not implemented yet
          faker:
            pyint:
              min_value: 0
              max_value: 115
      address_string:
          type: string
          mock: $current_address.full_address
      current_address:
          type: relation
          relation_type: mt1
          to: Address.address_id
          local_field: address_id
          remote_name: persons
          mock:
            relation_strategy: pick_random
      address_history:
          type: relation
          to: AddressHistory.id
          local_field: adress_history_id
          remote_name: person
          relation_type: 1tm
          relation_strategy: create(0, 5)
      partner:
          type: relation
          to: Person.person_id
          relation_type: 1t1
          remote_name: partner
          local_field: partner_id
          mock:
            relation_strategy: create
            relation_overrides:
              current_address: $SELF.current_address
              age:
                faker: {pyint: {min_value: 18, max_value: 115}}
  Address:
    fields:
      address_id:
        type: integer
        mock:
          faker:
            pyint:
              min_value: 0
      postcode:
        type: string
        mock:
          faker: postcode
      postcode4:
        type: string
        mock: $postcode[:4]  # slicing not yet implemented, slice will be ignored
      street:
        type: string
        mock:
          faker: street_name
      housenumber:
        type: integer
        mock:
          faker: building_number
      full_address:
        type: string
        mock: $street $housenumber, $postcode
  AddressHistory:
    fields:
      id:
        type: integer
        primary_key: True
      address:
        type: relation
        relation_type: mt1
        to: Address.address_id
        local_field: address_id
      date_start:
        type: date
      date_end:
        type: date
